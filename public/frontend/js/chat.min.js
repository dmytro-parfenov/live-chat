function soundNotification(o){var n=new Audio;n.src=o,n.autoplay=!0}function sendNotification(o,n){function e(){window.focus(),$("html, body").animate({scrollTop:$(document).height()},500),this.close()}if("granted"===Notification.permission){var t=new Notification(o,n);t.onclick=e}else"denied"!==Notification.permission&&Notification.requestPermission(function(t){if("granted"===t){var a=new Notification(o,n);a.onclick=e}})}$(document).ready(function(){$("body").on("click",".map-marker",function(){locationLat=parseFloat($(this).attr("data-user-location-lat")),locationLng=parseFloat($(this).attr("data-user-location-lng"));var o={lat:locationLat,lng:locationLng};mapObjectLocation=$("#map-object-location")[0];var n=new google.maps.Map(mapObjectLocation,{zoom:14,center:o});$.ajax({type:"GET",url:"https://maps.googleapis.com/maps/api/geocode/json",data:{latlng:locationLat+","+locationLng,language:"en",key:"AIzaSyAIpi0wvFb7yyxMzJZWXYxX3cEQn_byngU"},success:function(e){var t='<div id="content-map-marker">'+e.results[0].formatted_address+"</div>",a=new google.maps.InfoWindow({content:t}),i=new google.maps.Marker({position:o,map:n});google.maps.event.addListener(i,"click",function(){a.open(n,i)})}}),$(".background-map-object, #map-object").stop(),$(".background-map-object, #map-object").fadeIn(500),google.maps.event.trigger(n,"resize");var e=new google.maps.LatLng(locationLat,locationLng);n.setCenter(e)}),$(".background-map-object").click(function(){$(".background-map-object, #map-object").stop(),$(".background-map-object, #map-object").fadeOut(500)})}),$(window).on("load",function(){"Notification"in window?Notification.requestPermission():console.log("Your browser does not support HTML5 Notifications");var o=new Pusher("5ccc3f2a7680d594a7dc",{encrypted:!0}),n=o.subscribe("new-message-channel");n.bind("new-message-event",function(o){$("html, body").animate({scrollTop:$(document).height()},500),$(".message-block").last().after(o.html),$(".message-block").last().hide(),$(".message-block").last().fadeIn(500),document.hidden&&(soundNotification("frontend/sounds/get-message.wav"),sendNotification(o.user_name,{body:o.message,icon:"favicon.ico",dir:"auto"}))});var e=o.subscribe("new-user-channel");e.bind("new-user-event",function(o){soundNotification("frontend/sounds/get-message.wav"),sendNotification("New user connected",{body:o,icon:"favicon.ico",dir:"auto"})})});