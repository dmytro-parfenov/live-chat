function soundNotification(o){var n=new Audio;n.src=o,n.autoplay=!0}function sendNotification(o,n){function t(){window.focus(),$("html, body").animate({scrollTop:$(document).height()},500),this.close()}if("granted"===Notification.permission){var e=new Notification(o,n);e.onclick=t}else"denied"!==Notification.permission&&Notification.requestPermission(function(e){if("granted"===e){var i=new Notification(o,n);i.onclick=t}})}$(document).ready(function(){$(".map-marker").click(function(){locationLat=parseFloat($(this).attr("data-user-location-lat")),locationLng=parseFloat($(this).attr("data-user-location-lng")),mapObject=$("#map-object-location")[0];var o={lat:locationLat,lng:locationLng},n=new google.maps.Map(mapObject,{zoom:14,center:o});new google.maps.Marker({position:o,map:n});$(".background-map-object, #map-object").stop(),$(".background-map-object, #map-object").fadeIn(500)}),$(".background-map-object").click(function(){$(".background-map-object, #map-object").stop(),$(".background-map-object, #map-object").fadeOut(500),$("#map-object-location").find("div").remove()})}),$(window).on("load",function(){"Notification"in window?Notification.requestPermission():console.log("Your browser does not support HTML5 Notifications");var o=new Pusher("5ccc3f2a7680d594a7dc",{encrypted:!0}),n=o.subscribe("new-message-channel");n.bind("new-message-event",function(o){$("html, body").animate({scrollTop:$(document).height()},500),$(".message-block").last().after(o.html),$(".message-block").last().hide(),$(".message-block").last().fadeIn(500),document.hidden&&(soundNotification("frontend/sounds/get-message.wav"),sendNotification(o.user_name,{body:o.message,icon:"favicon.ico",dir:"auto"}))});var t=o.subscribe("new-user-channel");t.bind("new-user-event",function(o){soundNotification("frontend/sounds/get-message.wav"),sendNotification("New user connected",{body:o,icon:"favicon.ico",dir:"auto"})})});